# 343. Integer Break
[LeetCode - 343. Integer Break](https://leetcode.com/problems/integer-break/description/?envType=daily-question&envId=2023-10-06)
## Intuition

### Greedy 사상

> when n≥3, $n+1 \le (n-1)*2$ (등호는 n이 3일때만 성립)
$\Leftrightarrow$ when n=2, $n+1 > (n-1) * 2$
> 

> given 2*3, (2+1)*3 > 2 * (3+1) = 2 * (3-1) * 2. (Thus, invest to 2)
given 4*3, (4-1)*2*3 > 4 * (3-1) * 2 (Thus, invest to 4)
> 

이 명제들을 합쳐 알고리즘을 짤 수 있다. 그러기 위해서는, 주어진 n에 대해 답을 바로 구상하는것이 아닌, base solution 부터 주어진 숫자n에 도달할때까지 ‘1’을 ‘투자’하는 관점으로 문제를 바라보자. (진짜 설명을 이상하게 했지만 읽다보면 이해가 될거다)

우선 n이 2, 3, 4 인경우, 답은 각각 `1`, `3`, `2*2(=4)` 이다.

자 그럼 n이 5인 경우는, n이 4인 경우의 답인 2*2 (혹은 4)에 1을 투자해서, 어떤 투자가 가장 큰 수익을 얻는지 비교해보자. (나중에 서술하겠지만, 사실 2*2에서 시작하나 4에서 시작하나 첫번째 명제로 인해 같은 결과를 도출하게 된다.)

우선 2*2에서 시작해보자. 우리는 2에 1을 플러스해서 3*2 = 6 을 얻을수도 있고, 2에서 숫자 1을 뺀다음, 투자할 1에 플러스해주는 관점으로 2*1*2 = 4 를 얻을수도 있다. 여기서 6보다 4가 더 크므로, 우리는 3*2 가 더 효율적이라고 할 수 있다. (위의 첫번째 명제로 인해 이러한 결과는 수학적으로 당연하다.)

만약 4에서 시작한다면, 비슷하게 4에 1을 플러스해서 5를 얻을 수도 있고, 4에서 숫자 1을 뺀다음, 투자할 1에 플러스해주는 원리로 3*2=6을 얻을수도있다. 이또한 첫번째 명제의 부등식으로 인해 3*2=6을 선택하는것이 합당하다.

그다음 n이 6인 경우를 고려해보자. n이 5인 상황의 답인 3*2에서 시작해서, 4*2, 3*3, 2*2*2, 3*1*2이 3가지 경우가 있다. 첫번째 명제로 인해, 4*2 와 2*2*2는 값이 같을것이며, 3*1*2는 3*3보다 작을것이 분명하다. 그렇다면 우리는 4*2(혹은 2*2*2) 와 3*3만 비교하면 된다. 이는 2번째 명제로 인해, 3*3이 더 크다는 것을 알 수 있다.

다시한번 n이 7인 경우를 고려해보자. n이 6인상황의 답인 3*3에서 시작해서, 첫번째 명제로 인해, 3*(3+1) = 3*(3-1)*2 = 12 가 제일 큰 곱임을 알 수 있다.

마지막으로 n이 8인 경우를 고려해보자. n이 7인상황의 답인 4*3에서 시작하자면, 3*2*3, 4*2*2가 있는데, 두번째 명제로 인해 3*2*3 이 답이며, 3*2*2에서 시작하자면, 똑같이 두번째 명제로 인해 3*3*2가 답이 됨을 알 수 있다.

편의상 4는 2*2로 표현하자. 그러면 n이 9 인경우에 답은 3*3*3이 되고, 10인 경우에는 3*3*2*2, 11인경우에는 3*3*3*2…
가 됨을 알아차릴수 있다. 

결국 이것들의 특징을 보면, $n \equiv 0 \pmod{3}$ 이면, 3으로만, $n \equiv 2 \pmod{3}$이면 3…3*2, $n \equiv 1 \pmod{3}$라면 3…3*2*2로 쪼개면됨을 알 수 있다.

**하지만** 위와같은 방법에는 부족한부분이 하나 있다.

> n=k인 상황에서의 답에서 도출할 수 있는 최대곱이 n=k+1인 상황에서의 최대곱이다
> 

라는 명제가 참인지 증명해야만, 위의 알고리즘이 정답임을 확신할 수 있다.

그래서 다음과같은 명제와,

> $3*(n-3) > n$ works for all $n>4.5$
> 

로 증명하려 하였지만, 못했다.. ㅠ

그렇지만 “**산술평균과 기하평균 사이의 관계식”으로 접근한 결과, 위의 알고리즘이 맞는거같다는 확신을 얻었다.**n을 m개의 숫자로 나눈다고 할때,

$$
max(x_1,x_2,...,x_m) \ge {x_1+x_2+...+x_m\over m} \ge \sqrt[m] {x_1 x_2  ...  x_m}
$$

이며, 오른쪽 부등호는 $**x_i$들이 모두 같을때 성립하므로**, 주어진 숫자n에 대해($x_1+x_2+...+x_m = n$), 최대한 큰 곱을 가지게 하는 $x_i$는, 다음과같은 식을 만족하는 숫자일 것이다.(편의상 $x$라고 하였다)

$$
{\operatorname{d}\!{\left(   x\right)^{\left( \frac{n}{x}\right)} }\over\operatorname{d}\!x} =0
$$

미분해보면, 주어진 식을 만족하는 m은 $e$ 인데, $e$는 2와 3사이의 숫자이므로, 우리는 주어진 n을 최대한 많은 2혹은 3으로 나누는게 가장 효율적임을 알 수 있다.

[343. Integer Break](https://www.desmos.com/calculator/p6tiprop5f)

참고 그래프

## Approach

```cpp
class Solution {
public:
    int integerBreak(int n) {
        if( n <= 3) return n-1;
        int power = n/3;
        if(n%3 == 1){
            power--;
            return pow(3,power)*4;
        } else if (n%3 ==2){
            return pow(3,power)*2;
        } else {
            return pow(3,power);
        }
    }
};
```